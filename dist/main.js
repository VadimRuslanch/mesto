(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function t(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=t((function e(t,r,o){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n(this,"_getTemplate",(function(){return document.querySelector(i._templateSelector).content.querySelector(".element").cloneNode(!0)})),n(this,"_removeElement",(function(){i._element.remove()})),n(this,"_activeLike",(function(e){e.target.classList.contains("element__like")&&e.target.classList.toggle("element__like_active")})),n(this,"_setEventListeners",(function(){i._cardImage=i._element.querySelector(".element__img"),i._nameImage=i._element.querySelector(".element__text"),i._likeButton=i._element.querySelector(".element__like"),i._removeImageButtton=i._element.querySelector(".element__trash"),i._removeImageButtton.addEventListener("click",(function(){i._removeElement()})),i._likeButton.addEventListener("click",(function(e){i._activeLike(e)})),i._cardImage.addEventListener("click",(function(){i._handleCardClick(i._name,i._link)}))})),n(this,"generateCard",(function(){return i._element=i._getTemplate(),i._setEventListeners(),i._cardImage.src=i._link,i._nameImage.textContent=i._name,i._cardImage.alt=i._name,i._element})),this._name=t.name,this._link=t.link,this._templateSelector=r,this._handleCardClick=o}));function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=i((function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,"_showInputError",(function(e,t){var n=r._formElement.querySelector(".".concat(e.id,"-error"));e.classList.add(r._inputErrorClass),n.textContent=t,n.classList.add(r._errorClass)})),a(this,"_hideInputError",(function(e){var t=r._formElement.querySelector(".".concat(e.id,"-error"));e.classList.remove(r._inputErrorClass),t.classList.remove(r._errorClass),t.textContent=""})),a(this,"_isValid",(function(e){e.validity.valid?r._hideInputError(e):r._showInputError(e,e.validationMessage)})),a(this,"_hasInvalidInput",(function(){return r._inputList.some((function(e){return!e.validity.valid}))})),a(this,"_toggleButtonState",(function(){r._hasInvalidInput()?(r._submitButtonSelector.classList.add(r._inactiveButtonClass),r._submitButtonSelector.setAttribute("disabled","disabled")):(r._submitButtonSelector.classList.remove(r._inactiveButtonClass),r._submitButtonSelector.removeAttribute("disabled","disabled"))})),a(this,"_searchInput",(function(){r._inputList.forEach((function(e){e.addEventListener("input",(function(){r._isValid(e),r._toggleButtonState(e)}))}))})),a(this,"_setEventListeners",(function(){r._formElement.addEventListener("submit",(function(e){e.preventDefault()}))})),a(this,"resetValidation",(function(){r._toggleButtonState(),r._inputList.forEach((function(e){r._hideInputError(e)}))})),a(this,"enableValidation",(function(){r._setEventListeners(),r._searchInput(),r._toggleButtonState()})),this._formElement=n,this._inputSelector=t.inputSelector,this._inputList=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._submitButton=t.submitButton,this._submitButtonSelector=this._formElement.querySelector(this._submitButton),this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._formList=t.formList})),l=document.querySelector(".main"),u=l.querySelector(".profile__info-name"),c=l.querySelector(".profile__info-about-me"),p=l.querySelector(".profile__add-button"),_=l.querySelector(".profile__edit-button"),d=document.querySelector(".elements"),m=document.querySelectorAll(".popup"),f=l.querySelector("#popup-profile"),v=l.querySelector("#popup-add-image"),h=document.querySelector("#popup-open-image"),y=f.querySelector("#form-profile"),b=v.querySelector("#form-image"),g=y.querySelector("#input-name"),S=y.querySelector("#input-about-me"),E=b.querySelector("#input-title"),k=b.querySelector("#input-link"),L=document.querySelector(".popup__image"),C=document.querySelector(".popup__text"),q={inputSelector:".popup__input",submitButton:".popup__save-button",inactiveButtonClass:"popup__save-button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible",formList:document.querySelectorAll(".popup__form")},B=[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}];B.reverse(),new s(q,y).enableValidation();var I=new s(q,b);function w(e){var t=function(e){return new r(e,"#elementTemplate",O).generateCard()}(e);d.prepend(t)}function x(e){e.classList.remove("popup_opened"),document.removeEventListener("keydown",V),e.removeEventListener("click",j)}function j(e){(e.target.classList.contains("popup_opened")||e.target.classList.contains("popup__close-button"))&&function(e){x(e.currentTarget)}(e)}function V(e){"Escape"===e.key&&m.forEach((function(e){x(e.closest(".popup"))}))}function A(e){e.classList.add("popup_opened"),document.addEventListener("keydown",V),e.addEventListener("click",j)}function O(e,t){L.src=t,C.textContent=e,L.alt=e,A(h)}I.enableValidation(),B.forEach((function(e){w(e)})),b.addEventListener("submit",(function(e){w({name:E.value,link:k.value}),x(v),e.target.reset(),I.resetValidation()})),p.addEventListener("click",(function(){A(v)})),_.addEventListener("click",(function(){A(f),g.value=u.textContent,S.value=c.textContent})),y.addEventListener("submit",(function(e){e.preventDefault(),u.textContent=g.value,c.textContent=S.value,x(f)}))})();